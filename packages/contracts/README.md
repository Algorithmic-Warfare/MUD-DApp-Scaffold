# Contracts Package

This package contains the smart contracts for the Tribe MUD DApp, built using Foundry and MUD (Mutable Universe Design).

## Features

-   **Foundry:** A fast, portable and modular toolkit for Ethereum application development.
-   **MUD:** A framework for building decentralized, autonomous worlds.
-   **Solidity:** The primary language for writing smart contracts on Ethereum.

## Getting Started

### Prerequisites

-   [Foundry](https://book.getfoundry.sh/)
-   [pnpm](https://pnpm.io/)

### Installation

```bash
pnpm install
```

### Running Tests

```bash
forge test
```

## Project Structure

```
src/
├── codegen/          # Autogenerated code from MUD
├── systems/          # System contracts that define game logic
├── tables/           # Table contracts that store game state
├── world/            # Interfaces for interacting with the World
├── Tasklist/         # Tasklist related contracts
├── Constants.sol     # Constants used in the contracts
├── Errors.sol        # Custom error definitions
├── TaskSystem.sol    # The main system contract for managing tasks
├── ITaskSystem.sol   # Interface for the TaskSystem
├── IWorld.sol        # Interface for the World
├── Tasklist.sol      # Table for storing task information
├── common.sol        # Common libraries and utilities
└── index.sol         # Exports all the contracts
script/             # Deployment scripts
test/               # Test contracts
mud.config.ts       # MUD configuration file
foundry.toml        # Foundry configuration file
```

## Configuration

### Environment Variables

The following environment variables are used to configure the contracts:

-   `WORLD_ADDRESS`: The address of the MUD World contract.
-   `CHAIN_ID`: The ID of the Ethereum chain.
-   `PRIVATE_KEY`: The private key of the deployer account.
-   `RPC_URL`: The URL of the Ethereum RPC endpoint.

These variables can be set in the `.env`, `.env.local`, and `.env.pyrope` files.

## Scripts

The following scripts are defined in `package.json`:

-   `build`: Builds the contracts using `mud build`.
-   `clean`: Cleans the build artifacts and autogenerated code.
-   `deploy:local`: Deploys the contracts to a local development network.
-   `deploy:pyrope`: Deploys the contracts to the Pyrope testnet.
-   `lint`: Runs the code linters.
-   `prettier`: Formats the Solidity code.
-   `solhint`: Lints the Solidity code.
-   `test`: Runs the tests using Forge.
-   `coverage`: Generates code coverage reports.
